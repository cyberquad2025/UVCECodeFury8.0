<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AgriMitra | Fertilizers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --green:#2d6a4f;
      --dark:#1b4332;
      --light:#d8f3dc;
      --bg:#f6fff9;
    }
    *{box-sizing:border-box;}
    body{margin:0; font-family:Segoe UI,Arial; background:var(--bg); color:#222;}

    /* Weather Strip */
    .weather-strip {
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:center;
      padding:8px 12px;
      background: rgba(0,0,0,0.22);
      border-bottom: 1px solid rgba(255,255,255,0.12);
      font-size: 14px;
      flex-wrap:wrap;
      color: #fff;
    }
    .weather-pill {
      background: rgba(255,255,255,0.12);
      padding:6px 10px;
      border-radius: 999px;
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-weight:600;
    }
    .small-muted { opacity: .9; font-weight:500; }

    /* Navbar */
    nav{display:flex; justify-content:space-between; align-items:center;
        background:var(--green); color:#fff; padding:12px 20px; position:relative;}
    .logo{font-weight:bold; font-size:20px;}
    nav ul{list-style:none; display:flex; gap:20px; margin:0; padding:0;}
    nav a{color:#fff; text-decoration:none; font-weight:500;}
    nav a:hover{text-decoration:underline;}
    .menu-toggle{display:none; font-size:26px; cursor:pointer;}
    @media(max-width:768px){
      nav ul{display:none; flex-direction:column; gap:14px; background:rgba(0,0,0,0.9);
             position:absolute; top:100%; left:0; width:100%; padding:18px 0; text-align:center;}
      nav ul.show{display:flex;}
      .menu-toggle{display:block;}
    }

    /* Container */
    .container{max-width:1100px; margin:20px auto; padding:20px; display:flex; gap:20px;}
    .main{flex:1; display:flex; flex-direction:column; gap:20px;}
    .card{background:#fff; border-radius:12px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,0.08);}
    .card h1{margin-top:0; color:var(--green);}
    .list-container{display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:16px;}
    .item-card{background:#f8fdf7; padding:16px; border-radius:10px; border:1px solid #eee; display:flex; flex-direction:column; justify-content:space-between;}
    .item-card h3{margin:0 0 8px; color:var(--green);}
    .item-card p{margin:0; color:#666;}
    .item-card small{color:#999; display:block; margin-top:8px;}
    
  </style>
</head>
<body>

  <div class="weather-strip" id="weatherStrip">
    <span class="small-muted">Loading weather‚Ä¶</span>
  </div>

  <nav>
    <div class="logo">üåæ AgriMitra</div>
    <span class="menu-toggle" onclick="toggleMenu()">‚ò∞</span>
    <ul id="navbar-links">
      <li><a href="index.html" id="nav-home">Home</a></li>
      <li><a href="marketplace.html" id="nav-market">Crop Marketplace</a></li>
      <li><a href="equipment.html" id="nav-equip">Equipment</a></li>
      <li><a href="fertilizers.html" id="nav-fertilizers">Fertilizers & Manures</a></li>
      <li id="dashboard-link" style="display:none;"><a href="#" id="nav-dashboard">Dashboard</a></li>
      <li id="login-link"><a href="login.html" id="nav-login">Login/Signup</a></li>
      <li id="logout-link" style="display:none;"><a href="#" onclick="logout()" id="nav-logout">Logout</a></li>
    </ul>
    <select id="langSelect" onchange="changeLanguage()" style="padding:6px;border-radius:6px;font-weight:600;">
      <option value="en" selected>English</option>
      <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
      <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
      <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
      <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
    </select>
  </nav>

  <div class="container">
    <div class="main">
      <div class="card">
        <h1 id="page-title">Fertilizers & Manures</h1>
        <p id="page-subtitle">A curated list of essential fertilizers and manures for common crops.</p>
        <div id="fertilizer-list" class="list-container">
          </div>
      </div>
    </div>
  </div>

  <script>
    const translations = {
      en: {
        nav_home: "Home",
        nav_market: "Crop Marketplace",
        nav_equip: "Equipment",
        nav_fertilizers: "Fertilizers & Manures",
        nav_login: "Login/Signup",
        nav_dashboard: "Dashboard",
        nav_logout: "Logout",
        page_title: "Fertilizers & Manures",
        page_subtitle: "A curated list of essential fertilizers and manures for common crops.",
        loading: "Loading information...",
        error: "Unable to load information.",
        coming_soon: "More detailed information on fertilizers and manures is coming soon!"
      },
      hi: {
        nav_home: "‡§π‡•ã‡§Æ",
        nav_market: "‡§´‡§∏‡§≤ ‡§¨‡§æ‡§ú‡§º‡§æ‡§∞",
        nav_equip: "‡§â‡§™‡§ï‡§∞‡§£",
        nav_fertilizers: "‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§î‡§∞ ‡§ñ‡§æ‡§¶",
        nav_login: "‡§≤‡•â‡§ó‡§ø‡§®/‡§∏‡§æ‡§á‡§®‡§Ö‡§™",
        nav_dashboard: "‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
        nav_logout: "‡§≤‡•â‡§ó‡§Ü‡§â‡§ü",
        page_title: "‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§î‡§∞ ‡§ñ‡§æ‡§¶",
        page_subtitle: "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§´‡§∏‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï‡•ã‡§Ç ‡§î‡§∞ ‡§ñ‡§æ‡§¶‡•ã‡§Ç ‡§ï‡•Ä ‡§è‡§ï ‡§ï‡•ç‡§Ø‡•Ç‡§∞‡•á‡§ü‡•á‡§° ‡§∏‡•Ç‡§ö‡•Ä‡•§",
        loading: "‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...",
        error: "‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§∏‡§Æ‡§∞‡•ç‡§•‡•§",
        coming_soon: "‡§â‡§∞‡•ç‡§µ‡§∞‡§ï‡•ã‡§Ç ‡§î‡§∞ ‡§ñ‡§æ‡§¶‡•ã‡§Ç ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§ß‡§ø‡§ï ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü ‡§∞‡§π‡•Ä ‡§π‡•à!"
      },
      kn: {
        nav_home: "‡≤π‡≥ã‡≤Æ‡≥ç",
        nav_market: "‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤Æ‡≤æ‡≤∞‡≥Å‡≤ï‡≤ü‡≥ç‡≤ü‡≥Ü",
        nav_equip: "‡≤â‡≤™‡≤ï‡≤∞‡≤£",
        nav_fertilizers: "‡≤ó‡≥ä‡≤¨‡≥ç‡≤¨‡≤∞ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∞‡≤∏‡≤ó‡≥ä‡≤¨‡≥ç‡≤¨‡≤∞‡≤ó‡≤≥‡≥Å",
        nav_login: "‡≤≤‡≤æ‡≤ó‡≥ç ‡≤á‡≤®‡≥ç/‡≤∏‡≥à‡≤®‡≥ç ‡≤Ö‡≤™‡≥ç",
        nav_dashboard: "‡≤°‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç‚Äå‡≤¨‡≥ã‡≤∞‡≥ç‡≤°‡≥ç",
        nav_logout: "‡≤≤‡≤æ‡≤ó‡≥ç‚Äå‡≤î‡≤ü‡≥ç",
        page_title: "‡≤ó‡≥ä‡≤¨‡≥ç‡≤¨‡≤∞ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∞‡≤∏‡≤ó‡≥ä‡≤¨‡≥ç‡≤¨‡≤∞‡≤ó‡≤≥‡≥Å",
        page_subtitle: "‡≤∏‡≤æ‡≤Æ‡≤æ‡≤®‡≥ç‡≤Ø ‡≤¨‡≥Ü‡≤≥‡≥Ü‡≤ó‡≤≥‡≤ø‡≤ó‡≥Ü ‡≤Ö‡≤ó‡≤§‡≥ç‡≤Ø‡≤µ‡≤ø‡≤∞‡≥Å‡≤µ ‡≤ó‡≥ä‡≤¨‡≥ç‡≤¨‡≤∞‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∞‡≤∏‡≤ó‡≥ä‡≤¨‡≥ç‡≤¨‡≤∞‡≤ó‡≤≥ ‡≤ï‡≥ç‡≤Ø‡≥Å‡≤∞‡≥á‡≤ü‡≥Ü‡≤°‡≥ç ‡≤™‡≤ü‡≥ç‡≤ü‡≤ø.",
        loading: "‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü...",
        error: "‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≥Å ‡≤∏‡≤æ‡≤ß‡≥ç‡≤Ø‡≤µ‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤≤‡≥ç‡≤≤.",
        coming_soon: "‡≤ó‡≥ä‡≤¨‡≥ç‡≤¨‡≤∞ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∞‡≤∏‡≤ó‡≥ä‡≤¨‡≥ç‡≤¨‡≤∞‡≤ó‡≤≥ ‡≤ï‡≥Å‡≤∞‡≤ø‡≤§‡≥Å ‡≤á‡≤®‡≥ç‡≤®‡≤∑‡≥ç‡≤ü‡≥Å ‡≤µ‡≤ø‡≤µ‡≤∞‡≤µ‡≤æ‡≤¶ ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø ‡≤∂‡≥Ä‡≤ò‡≥ç‡≤∞‡≤¶‡≤≤‡≥ç‡≤≤‡≥á ‡≤¨‡≤∞‡≤≤‡≤ø‡≤¶‡≥Ü!"
      },
      te: {
        nav_home: "‡∞π‡±ã‡∞Æ‡±ç",
        nav_market: "‡∞™‡∞Ç‡∞ü‡∞≤ ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç‚Äå‡∞™‡±ç‡∞≤‡±á‡∞∏‡±ç",
        nav_equip: "‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡±Å",
        nav_fertilizers: "‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å & ‡∞∏‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡±Ä‡∞Ø ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å",
        nav_login: "‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç/‡∞∏‡±à‡∞®‡±ç‡∞Ö‡∞™‡±ç",
        nav_dashboard: "‡∞°‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç",
        nav_logout: "‡∞≤‡∞æ‡∞ó‡±ç‡∞Ö‡∞µ‡±Å‡∞ü‡±ç",
        page_title: "‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å & ‡∞∏‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡±Ä‡∞Ø ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å",
        page_subtitle: "‡∞∏‡∞æ‡∞ß‡∞æ‡∞∞‡∞£ ‡∞™‡∞Ç‡∞ü‡∞≤‡∞ï‡±Å ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Æ‡±à‡∞® ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∏‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡±Ä‡∞Ø ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤ ‡∞ï‡±ç‡∞Ø‡±Ç‡∞∞‡±á‡∞ü‡±Ü‡∞°‡±ç ‡∞ú‡∞æ‡∞¨‡∞ø‡∞§‡∞æ.",
        loading: "‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç ‡∞≤‡±ã‡∞°‡±ç ‡∞Ö‡∞µ‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...",
        error: "‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç ‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞≤‡±á‡∞ï‡∞™‡±ã‡∞Ø‡∞æ‡∞∞‡±Å.",
        coming_soon: "‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∏‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡±Ä‡∞Ø ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡∞™‡±à ‡∞Æ‡∞∞‡∞ø‡∞Ç‡∞§ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞£‡∞æ‡∞§‡±ç‡∞Æ‡∞ï ‡∞∏‡∞Æ‡∞æ‡∞ö‡∞æ‡∞∞‡∞Ç ‡∞§‡±ç‡∞µ‡∞∞‡∞≤‡±ã ‡∞∞‡∞æ‡∞¨‡±ã‡∞§‡±ã‡∞Ç‡∞¶‡∞ø!"
      },
      ta: {
        nav_home: "‡ÆÆ‡ØÅ‡Æï‡Æ™‡Øç‡Æ™‡ØÅ",
        nav_market: "‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡Æö‡Æ®‡Øç‡Æ§‡Øà",
        nav_equip: "‡Æâ‡Æ™‡Æï‡Æ∞‡Æ£‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        nav_fertilizers: "‡Æâ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        nav_login: "‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà/‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç",
        nav_dashboard: "‡Æü‡Ææ‡Æ∑‡Øç‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡Øç",
        nav_logout: "‡Æµ‡ØÜ‡Æ≥‡Æø‡ÆØ‡Øá‡Æ±‡ØÅ",
        page_title: "‡Æâ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        page_subtitle: "‡Æ™‡Øä‡Æ§‡ØÅ‡Æµ‡Ææ‡Æ© ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æ§‡Øá‡Æµ‡Øà‡ÆØ‡Ææ‡Æ© ‡Æâ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Æø‡Æ©‡Øç ‡Æ™‡Æü‡Øç‡Æü‡Æø‡ÆØ‡Æ≤‡Æø‡Æü‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü ‡Æ™‡Æü‡Øç‡Æü‡Æø‡ÆØ‡Æ≤‡Øç.",
        loading: "‡Æ§‡Æï‡Æµ‡Æ≤‡Øç ‡Æè‡Æ±‡Øç‡Æ±‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...",
        error: "‡Æ§‡Æï‡Æµ‡Æ≤‡Øà ‡Æè‡Æ±‡Øç‡Æ± ‡ÆÆ‡ØÅ‡Æü‡Æø‡ÆØ‡Æµ‡Æø‡Æ≤‡Øç‡Æ≤‡Øà.",
        coming_soon: "‡Æâ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡Æ±‡Øç‡Æ±‡Æø‡ÆØ ‡ÆÆ‡Øá‡Æ≤‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Æø‡Æ∞‡Æø‡Æµ‡Ææ‡Æ© ‡Æ§‡Æï‡Æµ‡Æ≤‡Øç‡Æï‡Æ≥‡Øç ‡Æµ‡Æø‡Æ∞‡Øà‡Æµ‡Æø‡Æ≤‡Øç ‡Æµ‡Æ∞‡Æµ‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æ©!"
      }
    };

    let lang = localStorage.getItem("lang") || "en";
    const L = translations[lang];

    function toggleMenu(){
      document.getElementById("navbar-links").classList.toggle("show");
    }

    /* Weather */
    async function loadWeather(){
      const el=document.getElementById('weatherStrip');
      try{
        const pos=await new Promise((res,rej)=>navigator.geolocation.getCurrentPosition(res,rej));
        const {latitude:lat,longitude:lon}=pos.coords;
        const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
        const j=await r.json();const w=j.current_weather;
        el.innerHTML=`<span class="weather-pill">üå°Ô∏è ${Math.round(w.temperature)}¬∞C</span>
                      <span class="weather-pill">üí® ${w.windspeed} km/h</span>`;
      }catch(e){el.innerHTML="<span class='weather-pill'>‚ö†Ô∏è Weather unavailable</span>";}
    }

    /* Navbar logic */
    function updateNavbar(){
      const user = JSON.parse(localStorage.getItem("user") || "{}");
      const dash = document.getElementById("dashboard-link");
      const login = document.getElementById("login-link");
      const logoutBtn = document.getElementById("logout-link");
      if(user && user.id){
        dash.style.display="inline-block";
        dash.querySelector("a").href = user.role==="farmer" ? "farmer.html":"buyer.html";
        login.style.display="none"; logoutBtn.style.display="inline-block";
      } else {
        dash.style.display="none"; login.style.display="inline-block"; logoutBtn.style.display="none";
      }
    }

    function logout(){
      localStorage.removeItem("user");
      updateNavbar();
      window.location="index.html";
    }

    /* Language */
    function changeLanguage(){
      const lang = document.getElementById("langSelect").value;
      localStorage.setItem("lang", lang);
      window.location.reload();
    }

    function applyTranslations(){
      document.title = L.page_title;
      document.getElementById("page-title").textContent = L.page_title;
      document.getElementById("page-subtitle").textContent = L.page_subtitle;
      document.getElementById("nav-home").textContent = L.nav_home;
      document.getElementById("nav-market").textContent = L.nav_market;
      document.getElementById("nav-equip").textContent = L.nav_equip;
      document.getElementById("nav-fertilizers").textContent = L.nav_fertilizers;
      document.getElementById("nav-login").textContent = L.nav_login;
      document.getElementById("nav-dashboard").textContent = L.nav_dashboard;
      document.getElementById("nav-logout").textContent = L.nav_logout;
      document.getElementById("fertilizer-list").innerHTML = `<p>${L.coming_soon}</p>`;
    }

    window.addEventListener("load", ()=>{
      const savedLang = localStorage.getItem("lang") || "en";
      document.getElementById("langSelect").value = savedLang;
      lang = savedLang; // Make sure the global lang variable is updated
      applyTranslations();
      updateNavbar();
      loadWeather();
    });
  </script>

</body>
</html>