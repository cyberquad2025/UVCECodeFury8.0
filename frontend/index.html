<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AgriMitra | Home</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --green: #2d6a4f;
      --light: #d4fc79;
      --white: #fff;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial;
      background: linear-gradient(135deg, #43cea2, #185a9d);
      color: var(--white);
    }

    /* Weather strip */
    .weather-strip {
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:center;
      padding:8px 12px;
      background: rgba(0,0,0,0.22);
      border-bottom: 1px solid rgba(255,255,255,0.12);
      font-size: 14px;
      flex-wrap:wrap;
    }
    .weather-pill {
      background: rgba(255,255,255,0.12);
      padding:6px 10px;
      border-radius: 999px;
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-weight:600;
    }
    .small-muted { opacity: .9; font-weight:500; }

    /* Navbar */
    nav {
      display:flex;
      justify-content:space-between;
      align-items:center;
      background: rgba(0,0,0,0.18);
      padding:14px 20px;
      position:relative;
    }
    .logo { font-size:20px; font-weight:700; display:flex; gap:8px; align-items:center; }
    nav ul { list-style:none; display:flex; gap:20px; margin:0; padding:0; align-items:center; }
    nav a { color:var(--white); text-decoration:none; font-weight:600; }
    nav a:hover{ color: var(--light); }

    /* Hamburger menu */
    .menu-toggle{display:none;font-size:26px;cursor:pointer;}
    @media(max-width:768px){
      nav ul{display:none;flex-direction:column;gap:14px;background:rgba(0,0,0,0.9);
             position:absolute;top:100%;left:0;width:100%;padding:18px 0;text-align:center;}
      nav ul.show{display:flex;}
      .menu-toggle{display:block;}
    }

    /* Ticker */
    .ticker-wrap { background: rgba(0,0,0,0.14); overflow:hidden; border-top:1px solid rgba(255,255,255,0.08); border-bottom:1px solid rgba(255,255,255,0.08); }
    .ticker { display:inline-block; white-space:nowrap; padding:10px 16px; animation: scroll 30s linear infinite; }
    .ticker span { margin: 0 28px; display:inline-flex; gap:10px; align-items:center; }
    .badge { background: rgba(255,255,255,0.12); padding:4px 10px; border-radius:6px; font-weight:700; }

    @keyframes scroll {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    /* Hero */
    .hero { display:flex; gap:30px; align-items:center; justify-content:space-between; padding:60px 8%; min-height:70vh; flex-wrap:wrap; }
    .hero-text { max-width:600px; flex:1; }
    h1 { font-size:44px; margin:0 0 12px; line-height:1.05; font-weight:800; color:#fff; text-shadow: 0 4px 18px rgba(0,0,0,0.2); }
    .lead { font-size:17px; color: rgba(255,255,255,0.95); margin-bottom:18px; }
    .hero-buttons { display:flex; gap:12px; flex-wrap:wrap; }
    .btn { padding:12px 20px; border-radius:8px; border:0; font-weight:800; cursor:pointer; }
    .btn-primary { background: var(--green); color:var(--white); }
    .btn-primary:hover { background:#1b4332; }
    .btn-secondary { background:transparent; color:var(--white); border:2px solid rgba(255,255,255,0.18); }
    .btn-secondary:hover { background:var(--white); color:var(--green); }

    .hero-img { flex:1; display:flex; justify-content:center; align-items:center; }
    .hero-img img { max-width:420px; width:100%; animation: float 4s ease-in-out infinite; }

    @keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-14px)} }

    /* Widget */
    .widget { margin: 24px 8%; background: rgba(255,255,255,0.08); padding:16px; border-radius:12px; backdrop-filter: blur(2px); color:#fff; max-width:1040px; }
    .widget h3 { margin:0 0 10px; }
    .widget form { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .widget select, .widget button { padding:10px 12px; border-radius:8px; border: 0; font-weight:700; }
    .widget select { min-width:140px; background:#fff; color:#222; }
    .widget button { background:var(--green); color:#fff; border:0; }
    .results { margin-top:12px; color:#fff; font-weight:600; }

    /* Responsive tweaks */
    @media (max-width: 900px) {
      .hero { flex-direction:column-reverse; padding:40px 6%; min-height:auto; text-align:center; }
      h1 { font-size:34px; }
      .hero-img img { max-width:300px; }
      .lead{font-size:15px;}
      .hero-buttons{justify-content:center;}
      .ticker{animation-duration:40s;}
    }
    @media(max-width:500px){
      h1{font-size:26px;}
      .btn{padding:10px 16px;font-size:14px;}
      .widget{margin:16px 4%;}
      .widget form{flex-direction:column;align-items:stretch;}
      .widget select,.widget button{width:100%;}
    }
  </style>
</head>
<body>

  <div class="weather-strip" id="weatherStrip">
    <span class="small-muted">Loading weather‚Ä¶</span>
  </div>

  <nav>
    <div class="logo">üåæ AgriMitra</div>
    <span class="menu-toggle" onclick="toggleMenu()">‚ò∞</span>
    <ul id="navbar-links">
      <li><a href="index.html" id="nav-home">Home</a></li>
      <li><a href="marketplace.html" id="nav-market">Crop Marketplace</a></li>
      <li><a href="equipment.html" id="nav-equip">Equipment</a></li>
      <li><a href="fertilizers.html" id="nav-fertilizers">Fertilizers & Manures</a></li>
      <li><a href="seeds.html" id="nav-seeds">Seeds</a></li>
      <li id="dashboard-link" style="display:none;"><a href="#" id="nav-dashboard">Dashboard</a></li>
      <li id="login-link"><a href="login.html" id="nav-login">Login/Signup</a></li>
      <li id="logout-link" style="display:none;"><a href="#" onclick="logout()" id="nav-logout">Logout</a></li>
    </ul>
    <select id="langSelect" onchange="changeLanguage()" style="padding:6px;border-radius:6px;font-weight:600;">
      <option value="en" selected>English</option>
      <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
      <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
      <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
      <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
    </select>
  </nav>

  <div class="ticker-wrap">
    <div class="ticker" id="priceTicker">Loading market prices‚Ä¶</div>
  </div>

  <section class="hero">
    <div class="hero-text">
      <h1>Empowering Farmers,<br> Transforming Agriculture</h1>
      <p class="lead">A transparent platform that helps farmers get fair prices, rent equipment affordably and plan according to weather.</p>
      <div class="hero-buttons">
        <button class="btn btn-primary" onclick="gotoDashboard()">Sell Your Crops</button>
        <button class="btn btn-secondary" onclick="window.location='equipment.html'">Find Equipment</button>
      </div>
    </div>

    <div class="hero-img">
      <img src="https://cdn-icons-png.flaticon.com/512/3075/3075977.png" alt="Farming illustration">
    </div>
  </section>

  <div class="widget" id="priceWidget">
    <h3>üîé Check Market Price</h3>
    <form id="priceForm">
      <select id="cropSelect">
        <option>Wheat</option>
        <option>Rice</option>
        <option>Maize</option>
        <option>Onion</option>
        <option>Tomato</option>
      </select>
      <select id="regionSelect">
        <option>Maharashtra</option>
        <option>Karnataka</option>
        <option>Gujarat</option>
        <option>Punjab</option>
        <option>Tamil Nadu</option>
      </select>
      <button type="submit">Get Price</button>
    </form>
    <div class="results" id="priceResult">Get the latest price for your crop and region.</div>
  </div>

  <script>
    const translations = {
      en: {
        hero_title: "Empowering Farmers,<br> Transforming Agriculture",
        hero_lead: "A transparent platform that helps farmers get fair prices, rent equipment affordably and plan according to weather.",
        sell_btn: "Sell Your Crops",
        equip_btn: "Find Equipment",
        widget_title: "üîé Check Market Price",
        widget_result: "Get the latest price for your crop and region.",
        nav_home: "Home",
        nav_market: "Crop Marketplace",
        nav_equip: "Equipment",
        nav_fertilizers: "Fertilizers & Manures",
        nav_seeds: "Seeds",
        nav_login: "Login/Signup",
        nav_dashboard: "Dashboard",
        nav_logout: "Logout"
      },
      hi: {
        hero_title: "‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§∂‡§ï‡•ç‡§§ ‡§¨‡§®‡§æ‡§®‡§æ,<br> ‡§ï‡•É‡§∑‡§ø ‡§ï‡•ã ‡§¨‡§¶‡§≤‡§®‡§æ",
        hero_lead: "‡§è‡§ï ‡§™‡§æ‡§∞‡§¶‡§∞‡•ç‡§∂‡•Ä ‡§Æ‡§Ç‡§ö ‡§ú‡•ã ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§â‡§ö‡§ø‡§§ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á, ‡§ï‡§ø‡§´‡§æ‡§Ø‡§§‡•Ä ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§â‡§™‡§ï‡§∞‡§£ ‡§ï‡§ø‡§∞‡§æ‡§è ‡§™‡§∞ ‡§≤‡•á‡§®‡•á ‡§î‡§∞ ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•á ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§¨‡§®‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§",
        sell_btn: "‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤‡•á‡§Ç ‡§¨‡•á‡§ö‡•á‡§Ç",
        equip_btn: "‡§â‡§™‡§ï‡§∞‡§£ ‡§ñ‡•ã‡§ú‡•á‡§Ç",
        widget_title: "üîé ‡§Æ‡§Ç‡§°‡•Ä ‡§≠‡§æ‡§µ ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç",
        widget_result: "‡§Ö‡§™‡§®‡•Ä ‡§´‡§∏‡§≤ ‡§î‡§∞ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§µ‡•Ä‡§®‡§§‡§Æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§",
        nav_home: "‡§π‡•ã‡§Æ",
        nav_market: "‡§´‡§∏‡§≤ ‡§¨‡§æ‡§ú‡§º‡§æ‡§∞",
        nav_equip: "‡§â‡§™‡§ï‡§∞‡§£",
        nav_fertilizers: "‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§î‡§∞ ‡§ñ‡§æ‡§¶",
        nav_seeds: "‡§¨‡•Ä‡§ú",
        nav_login: "‡§≤‡•â‡§ó‡§ø‡§®/‡§∏‡§æ‡§á‡§®‡§Ö‡§™",
        nav_dashboard: "‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
        nav_logout: "‡§≤‡•â‡§ó‡§Ü‡§â‡§ü"
      },
      kn: {
        hero_title: "‡≤∞‡≥à‡≤§‡≤∞ ‡≤∏‡≤¨‡≤≤‡≥Ä‡≤ï‡≤∞‡≤£,<br> ‡≤ï‡≥É‡≤∑‡≤ø ‡≤∞‡≥Ç‡≤™‡≤æ‡≤Ç‡≤§‡≤∞",
        hero_lead: "‡≤∞‡≥à‡≤§‡≤∞‡≤ø‡≤ó‡≥Ü ‡≤∏‡≥Ç‡≤ï‡≥ç‡≤§ ‡≤¨‡≥Ü‡≤≤‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤°‡≥Ü‡≤Ø‡≤≤‡≥Å, ‡≤ï‡≥à‡≤ó‡≥Ü‡≤ü‡≥Å‡≤ï‡≥Å‡≤µ ‡≤¶‡≤∞‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤â‡≤™‡≤ï‡≤∞‡≤£‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤æ‡≤°‡≤ø‡≤ó‡≥Ü‡≤ó‡≥Ü ‡≤™‡≤°‡≥Ü‡≤Ø‡≤≤‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤®‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤Ö‡≤®‡≥Å‡≤ó‡≥Å‡≤£‡≤µ‡≤æ‡≤ó‡≤ø ‡≤Ø‡≥ã‡≤ú‡≤®‡≥Ü ‡≤∞‡≥Ç‡≤™‡≤ø‡≤∏‡≤≤‡≥Å ‡≤∏‡≤π‡≤æ‡≤Ø ‡≤Æ‡≤æ‡≤°‡≥Å‡≤µ ‡≤™‡≤æ‡≤∞‡≤¶‡≤∞‡≥ç‡≤∂‡≤ï ‡≤µ‡≥á‡≤¶‡≤ø‡≤ï‡≥Ü.",
        sell_btn: "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≥Ü‡≤≥‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤Æ‡≤æ‡≤∞‡≤æ‡≤ü ‡≤Æ‡≤æ‡≤°‡≤ø",
        equip_btn: "‡≤â‡≤™‡≤ï‡≤∞‡≤£‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥Å‡≤°‡≥Å‡≤ï‡≤ø",
        widget_title: "üîé ‡≤Æ‡≤æ‡≤∞‡≥Å‡≤ï‡≤ü‡≥ç‡≤ü‡≥Ü ‡≤¨‡≥Ü‡≤≤‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≤ø",
        widget_result: "‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤™‡≥ç‡≤∞‡≤¶‡≥á‡≤∂‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤á‡≤§‡≥ç‡≤§‡≥Ä‡≤ö‡≤ø‡≤® ‡≤¨‡≥Ü‡≤≤‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤°‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø.",
        nav_home: "‡≤π‡≥ã‡≤Æ‡≥ç",
        nav_market: "‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤Æ‡≤æ‡≤∞‡≥Å‡≤ï‡≤ü‡≥ç‡≤ü‡≥Ü",
        nav_equip: "‡≤â‡≤™‡≤ï‡≤∞‡≤£",
        nav_fertilizers: "‡≤ó‡≥ä‡≤¨‡≥ç‡≤¨‡≤∞ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∞‡≤∏‡≤ó‡≥ä‡≤¨‡≥ç‡≤¨‡≤∞‡≤ó‡≤≥‡≥Å",
        nav_seeds: "‡≤¨‡≥Ä‡≤ú‡≤ó‡≤≥‡≥Å",
        nav_login: "‡≤≤‡≤æ‡≤ó‡≥ç ‡≤á‡≤®‡≥ç/‡≤∏‡≥à‡≤®‡≥ç ‡≤Ö‡≤™‡≥ç",
        nav_dashboard: "‡≤°‡≥ç‡≤Ø‡≤æ‡≤∂‡≥ç‚Äå‡≤¨‡≥ã‡≤∞‡≥ç‡≤°‡≥ç",
        nav_logout: "‡≤≤‡≤æ‡≤ó‡≥ç‚Äå‡≤î‡≤ü‡≥ç"
      },
      te: {
        hero_title: "‡∞∞‡±à‡∞§‡±Å‡∞≤‡∞ï‡±Å ‡∞∏‡∞æ‡∞ß‡∞ø‡∞ï‡∞æ‡∞∞‡∞§,<br> ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø‡∞Ç‡∞≤‡±ã ‡∞µ‡∞ø‡∞™‡±ç‡∞≤‡∞µ‡∞Ç",
        hero_lead: "‡∞∞‡±à‡∞§‡±Å‡∞≤‡∞ï‡±Å ‡∞∏‡∞∞‡∞∏‡∞Æ‡±à‡∞® ‡∞ß‡∞∞‡∞≤‡∞®‡±Å ‡∞™‡±ä‡∞Ç‡∞¶‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø, ‡∞§‡∞ï‡±ç‡∞ï‡±Å‡∞µ ‡∞ß‡∞∞‡∞ï‡±Å ‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡∞®‡±Å ‡∞Ö‡∞¶‡±ç‡∞¶‡±Ü‡∞ï‡±Å ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£‡∞Ç ‡∞™‡±ç‡∞∞‡∞ï‡∞æ‡∞∞‡∞Ç ‡∞™‡±ç‡∞∞‡∞£‡∞æ‡∞≥‡∞ø‡∞ï ‡∞µ‡±á‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞∏‡∞π‡∞æ‡∞Ø‡∞™‡∞°‡±á ‡∞í‡∞ï ‡∞™‡∞æ‡∞∞‡∞¶‡∞∞‡±ç‡∞∂‡∞ï ‡∞µ‡±á‡∞¶‡∞ø‡∞ï.",
        sell_btn: "‡∞Æ‡±Ä ‡∞™‡∞Ç‡∞ü‡∞≤‡∞®‡±Å ‡∞Ö‡∞Æ‡±ç‡∞Æ‡∞Ç‡∞°‡∞ø",
        equip_btn: "‡∞â‡∞™‡∞ï‡∞∞‡∞£‡∞æ‡∞≤‡∞®‡±Å ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞Ç‡∞°‡∞ø",
        widget_title: "üîé ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç ‡∞ß‡∞∞‡∞®‡±Å ‡∞§‡∞®‡∞ø‡∞ñ‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
        widget_result: "‡∞Æ‡±Ä ‡∞™‡∞Ç‡∞ü ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡±ç‡∞∞‡∞æ‡∞Ç‡∞§‡∞Ç ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞§‡∞æ‡∞ú‡∞æ ‡∞ß‡∞∞‡∞®‡±Å ‡∞™‡±ä‡∞Ç‡∞¶‡∞Ç‡∞°‡∞ø.",
        nav_home: "‡∞π‡±ã‡∞Æ‡±ç",
        nav_market: "‡∞™‡∞Ç‡∞ü‡∞≤ ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç‚Äå‡∞™‡±ç‡∞≤‡±á‡∞∏‡±ç",
        nav_equip: "‡∞™‡∞∞‡∞ø‡∞ï‡∞∞‡∞æ‡∞≤‡±Å",
        nav_fertilizers: "‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å & ‡∞∏‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡±Ä‡∞Ø ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞≤‡±Å",
        nav_seeds: "‡∞µ‡∞ø‡∞§‡±ç‡∞§‡∞®‡∞æ‡∞≤‡±Å",
        nav_login: "‡∞≤‡∞æ‡∞ó‡∞ø‡∞®‡±ç/‡∞∏‡±à‡∞®‡±ç‡∞Ö‡∞™‡±ç",
        nav_dashboard: "‡∞°‡∞æ‡∞∑‡±ç‚Äå‡∞¨‡±ã‡∞∞‡±ç‡∞°‡±ç",
        nav_logout: "‡∞≤‡∞æ‡∞ó‡±ç‡∞Ö‡∞µ‡±Å‡∞ü‡±ç"
      },
      ta: {
        hero_title: "‡Æµ‡Æø‡Æµ‡Æö‡Ææ‡ÆØ‡Æø‡Æï‡Æ≥‡Øà ‡ÆÆ‡Øá‡ÆÆ‡Øç‡Æ™‡Æü‡ØÅ‡Æ§‡Øç‡Æ§‡ØÅ‡Æ§‡Æ≤‡Øç,<br> ‡Æµ‡Æø‡Æµ‡Æö‡Ææ‡ÆØ‡Æ§‡Øç‡Æ§‡Øà ‡ÆÆ‡Ææ‡Æ±‡Øç‡Æ±‡ØÅ‡Æ§‡Æ≤‡Øç",
        hero_lead: "‡Æµ‡Æø‡Æµ‡Æö‡Ææ‡ÆØ‡Æø‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡Æ®‡Æø‡ÆØ‡Ææ‡ÆØ‡ÆÆ‡Ææ‡Æ© ‡Æµ‡Æø‡Æ≤‡Øà‡Æï‡Æ≥‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡ÆÆ‡Æ≤‡Æø‡Æµ‡Ææ‡Æ© ‡Æµ‡Æø‡Æ≤‡Øà‡ÆØ‡Æø‡Æ≤‡Øç ‡Æâ‡Æ™‡Æï‡Æ∞‡Æ£‡Æô‡Øç‡Æï‡Æ≥‡Øà ‡Æµ‡Ææ‡Æü‡Æï‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡Æé‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç, ‡Æµ‡Ææ‡Æ©‡Æø‡Æ≤‡Øà‡Æï‡Øç‡Æï‡ØÅ ‡Æè‡Æ±‡Øç‡Æ™ ‡Æ§‡Æø‡Æü‡Øç‡Æü‡ÆÆ‡Æø‡Æü‡Æµ‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç ‡Æí‡Æ∞‡ØÅ ‡Æµ‡ØÜ‡Æ≥‡Æø‡Æ™‡Øç‡Æ™‡Æü‡Øà‡ÆØ‡Ææ‡Æ© ‡Æ§‡Æ≥‡ÆÆ‡Øç.",
        sell_btn: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç‡Æï‡Æ≥‡Øà ‡Æµ‡Æø‡Æ±‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
        equip_btn: "‡Æâ‡Æ™‡Æï‡Æ∞‡Æ£‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Æ£‡Øç‡Æü‡Æ±‡Æø‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç",
        widget_title: "üîé ‡Æö‡Æ®‡Øç‡Æ§‡Øà ‡Æµ‡Æø‡Æ≤‡Øà‡ÆØ‡Øà ‡Æö‡Æ∞‡Æø‡Æ™‡Ææ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
        widget_result: "‡Æâ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æø‡Æ∞‡Ææ‡Æ®‡Øç‡Æ§‡Æø‡ÆØ‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡Ææ‡Æ© ‡Æö‡ÆÆ‡ØÄ‡Æ™‡Æ§‡Øç‡Æ§‡Æø‡ÆØ ‡Æµ‡Æø‡Æ≤‡Øà‡ÆØ‡Øà‡Æ™‡Øç ‡Æ™‡ØÜ‡Æ±‡ØÅ‡Æô‡Øç‡Æï‡Æ≥‡Øç.",
        nav_home: "‡ÆÆ‡ØÅ‡Æï‡Æ™‡Øç‡Æ™‡ØÅ",
        nav_market: "‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡Æö‡Æ®‡Øç‡Æ§‡Øà",
        nav_equip: "‡Æâ‡Æ™‡Æï‡Æ∞‡Æ£‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        nav_fertilizers: "‡Æâ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æâ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øç",
        nav_seeds: "‡Æµ‡Æø‡Æ§‡Øà",
        nav_login: "‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà/‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç",
        nav_dashboard: "‡Æü‡Ææ‡Æ∑‡Øç‡Æ™‡Øã‡Æ∞‡Øç‡Æü‡Øç",
        nav_logout: "‡Æµ‡ØÜ‡Æ≥‡Æø‡ÆØ‡Øá‡Æ±‡ØÅ"
      }
    };

    function changeLanguage(){
      const lang = document.getElementById("langSelect").value;
      localStorage.setItem("lang", lang);

      const L = translations[lang];
      document.querySelector(".hero-text h1").innerHTML = L.hero_title;
      document.querySelector(".lead").textContent = L.hero_lead;
      document.querySelector(".btn-primary").textContent = L.sell_btn;
      document.querySelector(".btn-secondary").textContent = L.equip_btn;

      document.querySelector("#priceWidget h3").textContent = L.widget_title;
      document.querySelector("#priceResult").textContent = L.widget_result;

      // Update navbar links by ID
      document.getElementById("nav-home").textContent = L.nav_home;
      document.getElementById("nav-market").textContent = L.nav_market;
      document.getElementById("nav-equip").textContent = L.nav_equip;
      document.getElementById("nav-fertilizers").textContent = L.nav_fertilizers;
      document.getElementById("nav-seeds").textContent = L.nav_seeds;
      document.getElementById("nav-login").textContent = L.nav_login;
      document.getElementById("nav-dashboard").textContent = L.nav_dashboard;
      document.getElementById("nav-logout").textContent = L.nav_logout;
    }

    function toggleMenu(){
      document.getElementById("navbar-links").classList.toggle("show");
    }
    const API = (window.location.protocol && window.location.protocol.startsWith('http')) ? window.location.origin : 'http://127.0.0.1:5000';

    function updateNavbar(){
      const user = JSON.parse(localStorage.getItem("user") || "{}");
      const dash = document.getElementById("dashboard-link");
      const login = document.getElementById("login-link");
      const logoutBtn = document.getElementById("logout-link");
      if(user && user.id){
        dash.style.display="inline-block";
        dash.querySelector("a").href = user.role==="farmer" ? "farmer.html":"buyer.html";
        login.style.display="none"; logoutBtn.style.display="inline-block";
      } else {
        dash.style.display="none"; login.style.display="inline-block"; logoutBtn.style.display="none";
      }
    }
    function logout(){localStorage.removeItem("user");updateNavbar();window.location="index.html";}
    function gotoDashboard(){
      const user = JSON.parse(localStorage.getItem("user") || "{}");
      if(user && user.id){window.location=user.role==="farmer"?"farmer.html":"buyer.html";}
      else{window.location="login.html";}
    }
    updateNavbar();

    async function loadWeather(){
      const el=document.getElementById('weatherStrip');
      try{
        const pos=await new Promise((res,rej)=>navigator.geolocation.getCurrentPosition(res,rej));
        const {latitude:lat,longitude:lon}=pos.coords;
        const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
        const j=await r.json();const w=j.current_weather;
        el.innerHTML=`<span class="weather-pill">üå°Ô∏è ${Math.round(w.temperature)}¬∞C</span>
                      <span class="weather-pill">üí® ${w.windspeed} km/h</span>`;
      }catch(e){el.innerHTML="<span class='weather-pill'>‚ö†Ô∏è Weather unavailable</span>";}
    }
    loadWeather();

    async function loadTicker(){
      const t=document.getElementById('priceTicker');
      try{const r=await fetch(API+"/market_prices?limit=30");const d=await r.json();
        if(!Array.isArray(d)||!d.length){t.textContent="No market prices yet.";return;}
        t.innerHTML=d.map(p=>`<span>${p.crop_name} (${p.region}) <span class='badge'>‚Çπ${p.avg_price}/${p.unit}</span></span>`).join(" ‚Ä¢ ");
      }catch(e){t.textContent="Unable to load market prices.";}
    }
    loadTicker(); setInterval(loadTicker,60000);

    document.getElementById('priceForm').addEventListener('submit',async ev=>{
      ev.preventDefault();
      const crop=document.getElementById('cropSelect').value;
      const region=document.getElementById('regionSelect').value;
      const out=document.getElementById('priceResult');out.textContent="Checking...";
      try{const r=await fetch(`${API}/market_prices?crop=${crop}&region=${region}&limit=1`);
        const arr=await r.json();
        if(arr.length){const p=arr[0];
          out.innerHTML=`Average price for <b>${p.crop_name}</b> in <b>${p.region}</b>: <b>‚Çπ${p.avg_price}/${p.unit}</b>`;}
        else{out.textContent=`No price found for ${crop} in ${region}.`;}
      }catch(e){out.textContent="Cannot fetch prices now.";}
    });

    window.addEventListener("load", ()=>{
      const savedLang = localStorage.getItem("lang") || "en";
      document.getElementById("langSelect").value = savedLang;
      changeLanguage();
    });
  </script>

</body>
</html>